<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TravlTeam Hub v2</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #0a0e17; overflow-x: hidden; }
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: #111827; }
    ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: #2A3344; }
    button:hover { opacity: 0.85; }
    input:focus { outline: none; border-color: #3b82f6 !important; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
const { useState, useEffect, useCallback } = React;

/* Storage shim â€” uses localStorage instead of window.storage */
const storage = {
  get: (key) => { try { const v = localStorage.getItem(key); return v ? { value: v } : null; } catch { return null; } },
  set: (key, val) => { try { localStorage.setItem(key, val); } catch(e) { console.error(e); } },
};

const C = {
  bg: "#0a0e17", surface: "#111827", surfaceAlt: "#0f172a", surfaceHover: "#1a2332",
  border: "#1e293b", borderActive: "#3b82f6", borderHover: "#2A3344",
  text: "#e2e8f0", textMid: "#9CA3B4", textMuted: "#64748b", textDim: "#475569", white: "#F1F3F7",
  blue: "#3b82f6", blueDim: "#1e40af", green: "#10b981", greenDim: "#064e3b",
  amber: "#f59e0b", amberDim: "#78350f", purple: "#8b5cf6", purpleDim: "#4c1d95",
  cyan: "#06b6d4", cyanDim: "#164e63", red: "#ef4444", redDim: "#7f1d1d",
  pink: "#ec4899", pinkDim: "#831843", orange: "#f97316", orangeDim: "#7c2d12",
};

const mono = "'JetBrains Mono', 'SF Mono', 'Fira Code', monospace";
const sans = "-apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif";

function Card({ color, title, children, style = {} }) {
  return (
    <div style={{ background: (color || C.blue) + "08", border: `1px solid ${(color || C.blue)}20`, borderRadius: 10, padding: "14px 16px", position: "relative", overflow: "hidden", ...style }}>
      <div style={{ position: "absolute", left: 0, top: 0, bottom: 0, width: 3, background: color || C.blue, borderRadius: "10px 0 0 10px" }} />
      {title && <div style={{ fontSize: 10, fontWeight: 700, letterSpacing: "0.1em", color: color || C.blue, marginBottom: 10, fontFamily: mono }}>{title}</div>}
      {children}
    </div>
  );
}

function Chip({ icon, name, desc }) {
  return (
    <div style={{ background: C.surface, border: `1px solid ${C.border}`, borderRadius: 8, padding: "8px 12px", display: "flex", alignItems: "center", gap: 8, flex: "1 1 auto", minWidth: 155 }}>
      <span style={{ fontSize: 17 }}>{icon}</span>
      <div>
        <div style={{ fontSize: 13, fontWeight: 600, color: C.text }}>{name}</div>
        <div style={{ fontSize: 11, color: C.textMuted }}>{desc}</div>
      </div>
    </div>
  );
}

function Stat({ value, label, color }) {
  return (
    <div style={{ textAlign: "center", flex: "1 1 0" }}>
      <div style={{ fontSize: 22, fontWeight: 800, color: color || C.blue, fontFamily: mono }}>{value}</div>
      <div style={{ fontSize: 11, color: C.textMuted, marginTop: 2 }}>{label}</div>
    </div>
  );
}

function SubHead({ text }) {
  return <p style={{ color: C.textMuted, fontSize: 13, margin: "0 0 12px 0", fontFamily: mono }}>{text}</p>;
}

function Badge({ label, color }) {
  return <span style={{ fontSize: 10, fontWeight: 700, color, background: color + "15", padding: "2px 8px", borderRadius: 10, fontFamily: mono, letterSpacing: "0.03em", whiteSpace: "nowrap" }}>{label}</span>;
}

const projectTabGroups = [
  { label: "TECH", tabs: [{ id: "stack", label: "Stack" }, { id: "arch", label: "Architecture" }, { id: "sharing", label: "Sharing" }, { id: "phases", label: "Phases" }] },
  { label: "BUSINESS", tabs: [{ id: "story", label: "Story" }, { id: "market", label: "Market" }, { id: "revenue", label: "Revenue" }, { id: "compare", label: "Features" }] },
  { label: "EXECUTION", tabs: [{ id: "timeline", label: "Timeline" }, { id: "financials", label: "Financials" }, { id: "journey", label: "User Journey" }] },
];

function StackTab() {
  const layers = [
    { label: "USER INTERFACE", color: C.blue, items: [{ name: "Expo SDK 52", desc: "React Native framework", icon: "\u{1F4F1}" }, { name: "Expo Router", desc: "File-based navigation", icon: "\u{1F9ED}" }, { name: "NativeWind v4", desc: "Tailwind for RN", icon: "\u{1F3A8}" }, { name: "react-native-maps", desc: "Google Maps provider", icon: "\u{1F5FA}\uFE0F" }] },
    { label: "STATE & DATA", color: C.purple, items: [{ name: "Zustand", desc: "Client state", icon: "\u26A1" }, { name: "TanStack Query", desc: "Server state + cache", icon: "\u{1F504}" }] },
    { label: "AUTH & SECURITY", color: C.green, items: [{ name: "Clerk", desc: "Auth + JWT tokens", icon: "\u{1F510}" }, { name: "Supabase RLS", desc: "Row-level security", icon: "\u{1F6E1}\uFE0F" }] },
    { label: "VENUE SEARCH (UNIFIED)", color: C.cyan, items: [{ name: "Google Places", desc: "Chains + photos", icon: "\u{1F4CD}" }, { name: "Foursquare", desc: "Local gems + 700 categories", icon: "\u{1F50D}" }, { name: "Merge + Dedup", desc: "100m proximity + 70% name match", icon: "\u{1F517}" }] },
    { label: "DATABASE & BACKEND", color: C.amber, items: [{ name: "Supabase", desc: "PostgreSQL + Realtime", icon: "\u{1F5C4}\uFE0F" }, { name: "EAS Build", desc: "CI/CD \u2192 TestFlight", icon: "\u{1F680}" }, { name: "GitHub", desc: "Source control + codebase", icon: "\u{1F419}" }] },
    { label: "BUILD PLATFORM", color: C.orange, items: [{ name: "vibecodeapp.com", desc: "AI-assisted app builder", icon: "\u{1F39B}\uFE0F" }, { name: "Full codebase export", desc: "GitHub repo \u2192 EAS Build", icon: "\u{1F4E6}" }] },
    { label: "PHASE 2 \u2014 AI LAYER", color: C.pink, items: [{ name: "Gemini Flash 2.5", desc: "Natural language search", icon: "\u{1F9E0}" }, { name: "~$0.04/search", desc: "AI + Places API combined", icon: "\u{1F4B0}" }] },
  ];
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 10 }}>
      <SubHead text="Built via vibecodeapp.com \u2014 React Native + Expo, codebase in GitHub" />
      {layers.map((layer, i) => (
        <div key={i}>
          <Card color={layer.color} title={layer.label}>
            <div style={{ display: "flex", flexWrap: "wrap", gap: 8 }}>{layer.items.map((item, j) => <Chip key={j} {...item} />)}</div>
          </Card>
          {i < layers.length - 1 && <div style={{ textAlign: "center", color: C.textDim, fontSize: 14, lineHeight: "18px" }}>{"\u2193"}</div>}
        </div>
      ))}
    </div>
  );
}

function ArchTab() {
  const flow = [
    { step: "Parent types search", icon: "\u{1F50E}", detail: '"hotel near tournament, pool, $150"' },
    { step: "Query splits to 2 APIs", icon: "\u26A1", detail: "Google Places + Foursquare parallel requests" },
    { step: "Results merged + deduped", icon: "\u{1F517}", detail: "100m proximity radius, 70% name similarity" },
    { step: "Sport-specific filters applied", icon: "\u{1F3DF}\uFE0F", detail: "Team block rates, bus parking, indoor pool" },
    { step: "Results rendered", icon: "\u{1F4CB}", detail: "Map pins + list view + bottom sheet detail" },
    { step: "Save to plan", icon: "\u{1F4BE}", detail: "Venue \u2192 plan_venues \u2192 shared with team" },
  ];
  const models = [
    { name: "plans", fields: "id, name, sport, tournament, share_code, created_by", color: C.blue },
    { name: "plan_collaborators", fields: "plan_id, user_id, role (owner|editor|viewer)", color: C.green },
    { name: "plan_venues", fields: "plan_id, venue_id, added_by, notes, votes", color: C.purple },
    { name: "venues", fields: "id, name, google_id, fsq_id, lat, lng, type, merged", color: C.cyan },
    { name: "profiles", fields: "id, clerk_id, display_name, avatar, sport_pref", color: C.amber },
  ];
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>
      <SubHead text="Unified venue search \u2014 how a parent's query becomes results" />
      <Card color={C.cyan} title="SEARCH FLOW">
        {flow.map((f, i) => (
          <div key={i} style={{ display: "flex", alignItems: "flex-start", gap: 10, marginBottom: i < flow.length - 1 ? 10 : 0 }}>
            <div style={{ width: 32, height: 32, borderRadius: 8, background: C.surface, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 16, flexShrink: 0 }}>{f.icon}</div>
            <div style={{ flex: 1 }}>
              <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
                <span style={{ fontSize: 10, fontWeight: 700, color: C.cyan, fontFamily: mono, minWidth: 22 }}>{String(i + 1).padStart(2, "0")}</span>
                <span style={{ fontSize: 13, fontWeight: 600, color: C.text }}>{f.step}</span>
              </div>
              <div style={{ fontSize: 11, color: C.textMuted, marginTop: 2, marginLeft: 30 }}>{f.detail}</div>
            </div>
          </div>
        ))}
      </Card>
      <Card color={C.purple} title="DATA MODEL">
        <div style={{ display: "flex", flexDirection: "column", gap: 6 }}>
          {models.map((m, i) => (
            <div key={i} style={{ background: C.surface, border: `1px solid ${C.border}`, borderRadius: 8, padding: "8px 12px" }}>
              <span style={{ fontSize: 12, fontWeight: 700, color: m.color, fontFamily: mono }}>{m.name}</span>
              <span style={{ fontSize: 11, color: C.textMuted, marginLeft: 8 }}>{m.fields}</span>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
}

function SharingTab() {
  const roles = [
    { role: "Owner", perm: "Full control, delete plan, manage members", color: C.blue },
    { role: "Editor", perm: "Add/remove venues, add notes, vote", color: C.green },
    { role: "Viewer", perm: "See plan, venues, notes \u2014 no edits", color: C.amber },
    { role: "Anonymous", perm: "View-only via share link, no account needed", color: C.textMuted },
  ];
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>
      <SubHead text="Partiful-inspired viral sharing \u2014 view without signup, account to collaborate" />
      <Card color={C.pink} title="THE VIRAL LOOP">
        <div style={{ fontSize: 13, color: C.text, lineHeight: 1.7 }}>
          <div style={{ display: "flex", flexDirection: "column", gap: 6 }}>
            {["Coach creates trip plan \u2192 gets share link", "Texts travlteam.app/p/abc12xyz to parent group chat", "Parents tap link \u2192 see full plan instantly (NO download, NO signup)", "Parent wants to suggest a hotel \u2192 taps \"Sign in to contribute\"", "Signs in with phone \u2192 auto-joins as collaborator", "Adds venue \u2192 original coach gets notified", "That parent creates their own plan for next tournament \u2192 cycle repeats"].map((s, i) => (
              <div key={i} style={{ display: "flex", gap: 8, alignItems: "flex-start" }}>
                <span style={{ color: C.pink, fontFamily: mono, fontSize: 11, fontWeight: 700, minWidth: 18 }}>{i + 1}.</span>
                <span>{s}</span>
              </div>
            ))}
          </div>
        </div>
      </Card>
      <Card color={C.green} title="ROLE HIERARCHY">
        <div style={{ display: "flex", flexDirection: "column", gap: 6 }}>
          {roles.map((r, i) => (
            <div key={i} style={{ display: "flex", alignItems: "center", gap: 10, background: C.surface, borderRadius: 8, padding: "8px 12px", border: `1px solid ${C.border}` }}>
              <span style={{ fontSize: 12, fontWeight: 700, color: r.color, fontFamily: mono, minWidth: 80 }}>{r.role}</span>
              <span style={{ fontSize: 12, color: C.textMuted }}>{r.perm}</span>
            </div>
          ))}
        </div>
      </Card>
      <Card color={C.purple} title="K-FACTOR MATH">
        <div style={{ display: "flex", gap: 16, marginBottom: 10 }}>
          <Stat value="1" label="tournament" color={C.purple} />
          <Stat value="15-40" label="teams" color={C.cyan} />
          <Stat value="12-18" label="parents/team" color={C.green} />
          <Stat value="750-2K" label="families reached" color={C.pink} />
        </div>
        <div style={{ fontSize: 12, color: C.textMuted, lineHeight: 1.6 }}>If 10% convert to plan creators \u2192 75-200 new plans per tournament. Each plan shared to another parent group \u2192 compound growth.</div>
      </Card>
    </div>
  );
}

function PhasesTab() {
  const phases = [
    { num: 1, name: "App Built via vibecodeapp.com", status: "done", items: ["React Native + Expo generated", "Full feature set coded", "Codebase exported to GitHub", "Deployed to Aidan's TestFlight"], color: C.green },
    { num: 2, name: "Environment Switch", status: "active", items: ["Reconfigure EAS for Mike's Apple Dev account", "Set up aiob@travlteam.com accounts", "Push first build to Mike's TestFlight", "Verify CI/CD pipeline works"], color: C.amber },
    { num: 3, name: "Systematic QA Testing", status: "ready", items: ["Auth flow (Clerk sign-up/in/out)", "Search + filters (Google Places + Foursquare)", "Map integration (pins, toggle, location)", "Plans CRUD (create, edit, delete)", "Save venue to plan flow", "Share link generation + opening", "Profile + settings"], color: C.blue },
    { num: 4, name: "Bug Fixing Sprint", status: "queued", items: ["Demo-breakers first (crashes, auth failures)", "Functional bugs (zero results, broken filters)", "UI/cosmetic issues (label fixes, layout)", "Mike/Tony feedback items (HVS-64, 80)"], color: C.blue },
    { num: 5, name: "Polish + Demo Prep", status: "queued", items: ["3 full app walkthroughs", "Label updates: Food/Lodging/Event Location", "Loading states + error handling", "Monday Feb 24 demo-ready"], color: C.blue },
  ];
  const postMvp = [
    { name: "Interactive plan sharing", desc: "Clickable venues, not a PDF \u2014 the Partiful moment", color: C.pink },
    { name: "Web app for non-users", desc: "travlteam.app/p/abc123 renders without the app installed", color: C.cyan },
    { name: "Deep links", desc: "Text/email \u2192 opens plan in app OR web fallback", color: C.purple },
    { name: "Directions button", desc: "Tap to navigate from event to venue \u2014 stretch goal for MVP", color: C.orange },
    { name: "Ratings & reviews", desc: "Clean dropdown-style, not social media \u2014 per Mike's vision", color: C.amber },
    { name: "Push notifications", desc: "'Marcus added Fairfield Inn to Dallas Cup trip'", color: C.green },
  ];
  const statusColors = { done: C.green, active: C.amber, ready: C.cyan, queued: C.textDim };
  const statusLabels = { done: "\u2713 BUILT", active: "\u25CF ACTIVE", ready: "\u25D0 READY", queued: "\u25CB QUEUED" };
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
      <SubHead text="QA + deploy sprint \u2014 app is built, now test \u2192 fix \u2192 polish by Feb 23" />
      <Card color={C.green} title="SPRINT REALITY CHECK" style={{ marginBottom: 4 }}>
        <div style={{ fontSize: 13, color: C.text, lineHeight: 1.6 }}>
          The entire app was generated via <strong style={{ color: C.green }}>vibecodeapp.com</strong> and is live on Aidan's TestFlight. This is <strong style={{ color: C.amber }}>NOT a build sprint</strong> \u2014 it's a QA + environment switch + bug fix sprint. 4 days: Wed night \u2192 Sun Feb 23.
        </div>
      </Card>
      {phases.map((p, i) => (
        <Card key={i} color={p.color} title={`PHASE ${p.num} \u2014 ${p.name}`}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 8, marginTop: -4 }}>
            <span style={{ fontSize: 11, fontWeight: 700, color: statusColors[p.status], fontFamily: mono }}>{statusLabels[p.status]}</span>
          </div>
          <div style={{ display: "flex", flexWrap: "wrap", gap: 6 }}>
            {p.items.map((item, j) => <span key={j} style={{ fontSize: 11, color: C.textMuted, background: C.surface, border: `1px solid ${C.border}`, borderRadius: 6, padding: "4px 10px" }}>{item}</span>)}
          </div>
        </Card>
      ))}
      <Card color={C.pink} title="POST-MVP SPRINT (Feb 24 \u2192 Mar ~8)">
        <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
          {postMvp.map((p, i) => (
            <div key={i} style={{ display: "flex", gap: 10, alignItems: "flex-start" }}>
              <div style={{ width: 4, height: 4, borderRadius: 2, background: p.color, marginTop: 7, flexShrink: 0 }} />
              <div><span style={{ fontSize: 13, fontWeight: 600, color: C.text }}>{p.name}</span><span style={{ fontSize: 12, color: C.textMuted, marginLeft: 6 }}>\u2014 {p.desc}</span></div>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
}

function StoryTab() {
  const timeline = [
    { date: "Oct 2025", title: "Project Kickoff", desc: "Mike & Tony Sherry hire Aidan to build TravlTeam. Developer Muhammad Yousaf Khan sourced through Toptal.", icon: "\u{1F680}", color: C.green },
    { date: "Oct\u2013Dec", title: "Development", desc: "Regular updates, builds shown. What isn't visible: entire backend running on Muhammad's personal AWS, deployments from his Mac only.", icon: "\u2699\uFE0F", color: C.blue },
    { date: "Mid-Jan 2026", title: "Mike Sees Working App", desc: "Functional demo shown \u2014 search, venues, basic flow all working. But it's running on infrastructure Aidan doesn't own or control.", icon: "\u{1F4F1}", color: C.purple },
    { date: "Late Jan", title: "The Discovery", desc: "Backend routes to Muhammad's servers. Build pipeline is his Mac. Credentials hardcoded. 25+ issues documented across 47+ instances.", icon: "\u{1F6A8}", color: C.red },
    { date: "Late Jan", title: "Access Revoked", desc: "Muhammad's access cut. Backend goes dark immediately \u2014 confirming the infrastructure dependency.", icon: "\u{1F512}", color: C.red },
    { date: "Jan\u2013Feb", title: "Audit + Recovery", desc: "Full codebase audit. Toptal complaint filed. Resolution: $2,630 refund (50% of Toptal fees) + $400 credit.", icon: "\u{1F50D}", color: C.amber },
    { date: "Feb 4", title: "Full Disclosure to Mike", desc: "Complete transparency email. Two options: finish together, or part ways cleanly. Aidan takes full responsibility.", icon: "\u{1F4E7}", color: C.amber },
    { date: "Feb 6+", title: "The Rebuild via vibecodeapp.com", desc: "Mike continues. No payments until delivery. Aidan rebuilds from scratch using vibecodeapp.com \u2014 AI-assisted React Native + Expo. Codebase to GitHub.", icon: "\u{1F3D7}\uFE0F", color: C.green },
    { date: "~Feb 15", title: "App on TestFlight", desc: "Full app deployed to Aidan's own TestFlight. All features coded via vibecodeapp. Untested.", icon: "\u2705", color: C.green },
    { date: "Feb 17", title: "Monday Review with Mike", desc: "Check-in call. Progress shown. Next: reconfigure EAS for Mike's Apple Developer account + begin QA.", icon: "\u{1F4DE}", color: C.blue },
    { date: "Feb 19", title: "TODAY \u2014 Sprint Begins", desc: "4 days to deadline. Environment switch tonight (aiob@travlteam.com). Then: systematic QA \u2192 bug fix \u2192 polish.", icon: "\u{1F3AF}", color: C.amber },
    { date: "Feb 23", title: "Phase 1 Deadline", desc: "Full Phase 1 functional on Mike's Apple Developer account. Demo-ready for Monday.", icon: "\u{1F3C1}", color: C.pink },
    { date: "Feb 24+", title: "Post-MVP Sprint", desc: "Interactive sharing, web app, deep links, directions \u2014 the Partiful moment.", icon: "\u{1F680}", color: C.purple },
  ];
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 2 }}>
      <SubHead text="The full arc \u2014 from crisis to AI-assisted rebuild to QA sprint" />
      <Card color={C.amber} title="MIKE'S PERSPECTIVE" style={{ marginBottom: 12 }}>
        <div style={{ fontSize: 13, color: C.text, lineHeight: 1.6, fontStyle: "italic" }}>"As recently as mid-January, I believed we were close to finished. The app I saw working was real \u2014 but it was running on someone else's infrastructure."</div>
        <div style={{ fontSize: 11, color: C.textMuted, marginTop: 6 }}>Mike paid $13,500 across 3 invoices. The rebuild honors that investment with a no-payment-until-delivery agreement.</div>
      </Card>
      <Card color={C.green} title="THE VIBECODEAPP FACTOR" style={{ marginBottom: 12 }}>
        <div style={{ fontSize: 13, color: C.text, lineHeight: 1.6 }}>Instead of hiring another developer, Aidan used <strong style={{ color: C.green }}>vibecodeapp.com</strong> to rebuild the entire app via AI-assisted generation. React Native + Expo codebase exported to GitHub, deployed via EAS Build to TestFlight. Full app exists and runs \u2014 now entering QA.</div>
      </Card>
      {timeline.map((e, i) => (
        <div key={i} style={{ display: "flex", gap: 14, alignItems: "stretch" }}>
          <div style={{ display: "flex", flexDirection: "column", alignItems: "center", width: 20 }}>
            <div style={{ width: 12, height: 12, borderRadius: "50%", background: e.color, marginTop: 14, flexShrink: 0, boxShadow: e.color === C.red || e.color === C.amber ? `0 0 10px ${e.color}40` : "none" }} />
            {i < timeline.length - 1 && <div style={{ width: 2, flex: 1, background: C.border, minHeight: 8 }} />}
          </div>
          <div style={{ background: e.color + "08", border: `1px solid ${e.color}20`, borderRadius: 8, padding: "10px 14px", marginBottom: 4, flex: 1 }}>
            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
              <span style={{ fontSize: 13, fontWeight: 700, color: C.text }}>{e.icon} {e.title}</span>
              <span style={{ fontSize: 11, color: C.textMuted, fontFamily: mono }}>{e.date}</span>
            </div>
            <div style={{ fontSize: 12, color: C.textMuted, marginTop: 4, lineHeight: 1.5 }}>{e.desc}</div>
          </div>
        </div>
      ))}
    </div>
  );
}

function MarketTab() {
  const segments = [
    { name: "Youth Sports Tourism (US)", size: "$19.2B", growth: "+8% CAGR", color: C.blue },
    { name: "Youth Sports Total Market", size: "$28.1B", growth: "Registration + gear + travel", color: C.purple },
    { name: "Sports Travel (All Ages)", size: "$52.4B", growth: "Including college + amateur", color: C.pink },
    { name: "Team Management Software", size: "$2.1B", growth: "TeamSnap, GameChanger etc.", color: C.green },
  ];
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>
      <SubHead text="$52B+ market \u2014 no one owns the travel planning layer for sports families" />
      <div style={{ display: "flex", flexWrap: "wrap", gap: 10 }}>
        {segments.map((s, i) => (
          <Card key={i} color={s.color} style={{ flex: "1 1 200px" }}>
            <div style={{ fontSize: 22, fontWeight: 800, color: s.color, fontFamily: mono }}>{s.size}</div>
            <div style={{ fontSize: 13, fontWeight: 600, color: C.text, marginTop: 4 }}>{s.name}</div>
            <div style={{ fontSize: 11, color: C.textMuted, marginTop: 2 }}>{s.growth}</div>
          </Card>
        ))}
      </div>
      <Card color={C.red} title="THE GAP">
        <div style={{ fontSize: 13, color: C.text, lineHeight: 1.7 }}>
          <strong style={{ color: C.red }}>TeamSnap / GameChanger</strong> own team management but have zero travel planning. <strong style={{ color: C.red }}>TripIt / Wanderlog / Tripsy</strong> own trip planning but have zero sports awareness. Every weekend, millions of parents coordinate through <strong style={{ color: C.amber }}>group texts, Facebook groups, and forwarded PDFs</strong>. TravlTeam sits in the gap.
        </div>
      </Card>
    </div>
  );
}

function RevenueTab() {
  const streams = [
    { name: "Hotel Affiliate Commissions", desc: "Hotels.com, Booking.com affiliate links. 4-8% per booking.", benchmark: "HotelPlanner: $100M+ rev on group hotel bookings", color: C.blue, phase: "Phase 2" },
    { name: "Premium Plans", desc: "Free: 1 active plan. Pro ($4.99/mo): unlimited plans, AI search, advanced filters.", benchmark: "AllTrails: $4.99/mo, 10M+ downloads", color: C.green, phase: "Phase 2" },
    { name: "Tournament Partnerships", desc: "Tournaments pay to be listed/featured. Preferred hotel blocks surfaced.", benchmark: "Sports Facilities Companies: $800M industry", color: C.purple, phase: "Phase 3" },
    { name: "Restaurant Recommendations", desc: "Featured placement for family-friendly restaurants. CPC or flat fee.", benchmark: "TheFork: \u20AC350M rev on restaurant bookings", color: C.amber, phase: "Phase 3" },
    { name: "Team Coordinator Tools", desc: "Club/league license for managing travel across all teams.", benchmark: "TeamSnap: $50-100/team/season for premium", color: C.cyan, phase: "Phase 3" },
    { name: "Insurance Referrals", desc: "Trip insurance, sports insurance referral fees.", benchmark: "Allianz Travel: $40-80 per policy, 20-30% commissions", color: C.orange, phase: "Phase 3" },
    { name: "Data & Insights", desc: "Anonymized sports travel patterns sold to tourism boards, hotel chains.", benchmark: "Placer.ai: foot traffic data \u2192 $100M+ valuation", color: C.pink, phase: "Phase 4" },
  ];
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
      <SubHead text="7 revenue streams \u2014 phased from affiliate to data" />
      {streams.map((s, i) => (
        <Card key={i} color={s.color}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: 6 }}>
            <div style={{ fontSize: 14, fontWeight: 700, color: C.text }}>{s.name}</div>
            <Badge label={s.phase} color={s.color} />
          </div>
          <div style={{ fontSize: 12, color: C.textMuted, lineHeight: 1.5, marginBottom: 6 }}>{s.desc}</div>
          <div style={{ fontSize: 11, color: C.textDim, fontStyle: "italic" }}>{"\u{1F4CA}"} {s.benchmark}</div>
        </Card>
      ))}
    </div>
  );
}

function CompareTab() {
  const features = [
    { name: "Dual venue API (Google + Foursquare)", us: true, teamsnap: false, gamechanger: false, tripit: false, wanderlog: true, tripsy: false },
    { name: "Sport-specific filters", us: true, teamsnap: false, gamechanger: false, tripit: false, wanderlog: false, tripsy: false },
    { name: "Interactive plan sharing", us: "soon", teamsnap: false, gamechanger: false, tripit: true, wanderlog: true, tripsy: true },
    { name: "AI-powered search", us: "p2", teamsnap: false, gamechanger: false, tripit: false, wanderlog: false, tripsy: false },
    { name: "Map + List toggle", us: true, teamsnap: false, gamechanger: false, tripit: false, wanderlog: true, tripsy: true },
    { name: "Tournament-aware venues", us: true, teamsnap: false, gamechanger: false, tripit: false, wanderlog: false, tripsy: false },
    { name: "Parent-to-parent sharing", us: true, teamsnap: false, gamechanger: false, tripit: false, wanderlog: false, tripsy: false },
  ];
  const renderCell = (val) => {
    if (val === true) return <span style={{ color: C.green }}>{"\u2713"}</span>;
    if (val === false) return <span style={{ color: C.textDim }}>{"\u2717"}</span>;
    if (val === "soon") return <span style={{ color: C.amber, fontSize: 9 }}>SOON</span>;
    if (val === "p2") return <span style={{ color: C.pink, fontSize: 9 }}>P2</span>;
    return <span style={{ color: C.textDim }}>{"\u2014"}</span>;
  };
  const cols = [{ key: "us", label: "TT", color: C.blue }, { key: "teamsnap", label: "TS", color: C.textMuted }, { key: "gamechanger", label: "GC", color: C.textMuted }, { key: "tripit", label: "Trip", color: C.textMuted }, { key: "wanderlog", label: "WL", color: C.textMuted }, { key: "tripsy", label: "Trp", color: C.textMuted }];
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
      <SubHead text="Feature matrix \u2014 where TravlTeam fills the gap" />
      <div style={{ overflowX: "auto" }}>
        <table style={{ width: "100%", borderCollapse: "collapse", fontSize: 12 }}>
          <thead><tr>
            <th style={{ textAlign: "left", padding: "8px 8px", borderBottom: `1px solid ${C.border}`, color: C.textMuted, fontWeight: 600, fontSize: 10, fontFamily: mono }}>Feature</th>
            {cols.map((c) => <th key={c.key} style={{ textAlign: "center", padding: "8px 4px", borderBottom: `1px solid ${C.border}`, color: c.color, fontWeight: 700, fontSize: 10, fontFamily: mono }}>{c.label}</th>)}
          </tr></thead>
          <tbody>{features.map((f, i) => (
            <tr key={i} style={{ background: i % 2 === 0 ? "transparent" : C.surface + "60" }}>
              <td style={{ padding: "7px 8px", color: C.text, borderBottom: `1px solid ${C.border}15`, fontSize: 12 }}>{f.name}</td>
              {cols.map((c) => <td key={c.key} style={{ textAlign: "center", padding: "7px 4px", borderBottom: `1px solid ${C.border}15`, fontSize: 14 }}>{renderCell(f[c.key])}</td>)}
            </tr>
          ))}</tbody>
        </table>
      </div>
    </div>
  );
}

function TimelineTab() {
  const events = [
    { date: "Oct 2025", label: "Project kickoff", type: "past", detail: "Muhammad hired via Toptal. Development begins." },
    { date: "Mid-Jan", label: "Working demo shown", type: "past", detail: "Mike sees functional app on Muhammad's infrastructure." },
    { date: "Late Jan", label: "Discovery + crisis", type: "past", detail: "Backend dependency exposed. Access revoked. App goes dark." },
    { date: "Feb 4", label: "Full disclosure email", type: "past", detail: "Two options presented. Mike chooses to continue." },
    { date: "Feb 6", label: "Clean rebuild starts", type: "past", detail: "vibecodeapp.com generates React Native + Expo app. Codebase to GitHub." },
    { date: "~Feb 15", label: "App on TestFlight", type: "past", detail: "Full app deployed to Aidan's TestFlight. All features coded. Untested." },
    { date: "Feb 17", label: "Monday review with Mike", type: "past", detail: "Check-in call. Progress shown. Next: switch environments + QA." },
    { date: "Feb 19", label: "TODAY \u2014 QA Sprint Begins", type: "today", detail: "Reconfigure EAS for Mike's Apple Dev (aiob@travlteam.com). 4 days: test \u2192 fix \u2192 polish." },
    { date: "Feb 20", label: "Full-day QA testing", type: "next", detail: "7 structured test blocks. Walk through every feature. Log every bug." },
    { date: "Feb 21", label: "Bug fixing (priority order)", type: "future", detail: "Demo-breakers \u2192 functional \u2192 cosmetic. Label updates: Food, Lodging, Event Location." },
    { date: "Feb 22", label: "Polish + walkthroughs", type: "future", detail: "3 full app walkthroughs as Mike would use it." },
    { date: "Feb 23", label: "PHASE 1 DEADLINE", type: "deadline", detail: "Full Phase 1 functional on Mike's Apple Developer account. Demo-ready." },
    { date: "Feb 24+", label: "Post-MVP sprint", type: "sprint", detail: "Interactive sharing, web app, deep links \u2014 the Partiful moment." },
    { date: "Mar\u2013May", label: "Lacrosse season", type: "goal", detail: "Every weekend = tournament = real-world testing." },
  ];
  const typeStyles = {
    past: { dot: C.green, bg: C.greenDim + "15", border: C.green + "25" },
    today: { dot: C.amber, bg: C.amberDim + "35", border: C.amber + "50" },
    next: { dot: C.blue, bg: C.blueDim + "15", border: C.blue + "25" },
    future: { dot: C.blue, bg: "transparent", border: C.border },
    deadline: { dot: C.red, bg: C.redDim + "25", border: C.red + "45" },
    sprint: { dot: C.pink, bg: C.pinkDim + "15", border: C.pink + "25" },
    goal: { dot: C.purple, bg: C.purpleDim + "12", border: C.purple + "20" },
  };
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 2 }}>
      <SubHead text="Oct 2025 \u2192 Lacrosse season \u2014 4 days to Feb 23 deadline" />
      {events.map((e, i) => {
        const s = typeStyles[e.type];
        const isKey = e.type === "today" || e.type === "deadline";
        return (
          <div key={i} style={{ display: "flex", gap: 14, alignItems: "stretch" }}>
            <div style={{ display: "flex", flexDirection: "column", alignItems: "center", width: 20 }}>
              <div style={{ width: isKey ? 14 : 10, height: isKey ? 14 : 10, borderRadius: "50%", background: s.dot, marginTop: 14, flexShrink: 0, boxShadow: isKey ? `0 0 12px ${s.dot}50` : "none" }} />
              {i < events.length - 1 && <div style={{ width: 2, flex: 1, background: C.border, minHeight: 6 }} />}
            </div>
            <div style={{ background: s.bg, border: `1px solid ${s.border}`, borderRadius: 8, padding: "9px 14px", marginBottom: 3, flex: 1 }}>
              <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                <span style={{ fontSize: 13, fontWeight: 700, color: isKey ? s.dot : C.text }}>{e.label}</span>
                <span style={{ fontSize: 11, color: C.textMuted, fontFamily: mono }}>{e.date}</span>
              </div>
              <div style={{ fontSize: 12, color: C.textMuted, marginTop: 3 }}>{e.detail}</div>
            </div>
          </div>
        );
      })}
    </div>
  );
}

function FinancialsTab() {
  const payments = [
    { from: "Mike \u2192 Aidan", amount: "$4,500", date: "Invoice 1", color: C.blue },
    { from: "Mike \u2192 Aidan", amount: "$4,500", date: "Invoice 2", color: C.blue },
    { from: "Mike \u2192 Aidan", amount: "$4,500", date: "Invoice 3", color: C.blue },
    { from: "Aidan \u2192 Toptal", amount: "~$5,260", date: "Developer fees", color: C.red },
    { from: "Toptal \u2192 Aidan", amount: "$2,630", date: "50% refund", color: C.green },
    { from: "Toptal", amount: "$400", date: "Platform credit", color: C.green },
  ];
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>
      <SubHead text="Full financial breakdown \u2014 what was paid, lost, and recovered" />
      <div style={{ display: "flex", gap: 12, flexWrap: "wrap" }}>
        <Card color={C.blue} style={{ flex: "1 1 150px" }}><Stat value="$13.5K" label="Total Mike paid" color={C.blue} /></Card>
        <Card color={C.red} style={{ flex: "1 1 150px" }}><Stat value="~$5.3K" label="Paid to Toptal" color={C.red} /></Card>
        <Card color={C.green} style={{ flex: "1 1 150px" }}><Stat value="$3.0K" label="Recovered" color={C.green} /></Card>
        <Card color={C.amber} style={{ flex: "1 1 150px" }}><Stat value="$0" label="Due until Phase 1" color={C.amber} /></Card>
      </div>
      <Card color={C.blue} title="MONEY FLOW">
        <div style={{ display: "flex", flexDirection: "column", gap: 6 }}>
          {payments.map((p, i) => (
            <div key={i} style={{ display: "flex", justifyContent: "space-between", alignItems: "center", background: C.surface, borderRadius: 8, padding: "8px 12px", border: `1px solid ${C.border}` }}>
              <div><span style={{ fontSize: 12, color: C.text, fontWeight: 600 }}>{p.from}</span><span style={{ fontSize: 11, color: C.textMuted, marginLeft: 8 }}>{p.date}</span></div>
              <span style={{ fontSize: 14, fontWeight: 800, color: p.color, fontFamily: mono }}>{p.amount}</span>
            </div>
          ))}
        </div>
      </Card>
      <Card color={C.green} title="CURRENT AGREEMENT">
        <div style={{ display: "flex", flexDirection: "column", gap: 8, fontSize: 13, color: C.text, lineHeight: 1.6 }}>
          {["No payments from Mike until Phase 1 is delivered and functional", "Aidan rebuilds entirely at his own cost and time investment", "All infrastructure under Mike's Apple Developer account (MG7Z3C55G5)", "Domain, email (aiob@travlteam.com), and accounts under Mike's ownership", "EAS Build CI/CD \u2014 no single-developer deployment dependencies", "Codebase in GitHub \u2014 full source control, no black boxes", "Full transparency: weekly Thursday updates + Monday video calls"].map((item, i) => (
            <div key={i} style={{ display: "flex", gap: 8, alignItems: "flex-start" }}><span style={{ color: C.green, fontSize: 14, marginTop: 1 }}>{"\u2713"}</span><span>{item}</span></div>
          ))}
        </div>
      </Card>
    </div>
  );
}

function JourneyTab() {
  const sarah = [
    { action: "Opens TravlTeam", detail: "Sees empty state: 'Plan your first tournament trip'", icon: "\u{1F4F1}" },
    { action: "Creates 'Dallas Cup U14'", detail: "Picks soccer, enters tournament name, dates, location", icon: "\u{1F4CB}" },
    { action: "Searches lodging", detail: "Applies filters: Team Block Rates, Indoor Pool, Breakfast, <$150", icon: "\u{1F50E}" },
    { action: "Views results", detail: "Map pins + list view. Taps Hampton Inn \u2192 bottom sheet with details", icon: "\u{1F5FA}\uFE0F" },
    { action: "Adds to plan + note", detail: "'Call front desk for team rate \u2014 mention Dallas Cup'", icon: "\u{1F4BE}" },
    { action: "Adds food nearby", detail: "Restaurant search. Adds note: 'Has private room for team dinner'", icon: "\u{1F37D}\uFE0F" },
    { action: "Taps Share", detail: "Gets link: travlteam.app/p/abc12xyz", icon: "\u{1F517}" },
    { action: "Texts to parent group", detail: "'Here's what I found for Dallas Cup housing \u2014 add your picks!'", icon: "\u{1F4AC}" },
  ];
  const marcus = [
    { action: "Taps link in group text", detail: "Opens in browser \u2014 sees Sarah's full plan instantly", icon: "\u{1F4F1}" },
    { action: "Browses venues", detail: "Sees Hampton Inn + note, Chili's + note. Map view available.", icon: "\u{1F440}" },
    { action: "Wants to suggest lodging", detail: "Taps 'Sign in to contribute' \u2014 enters phone number", icon: "\u270D\uFE0F" },
    { action: "Auto-joins as editor", detail: "No invite needed. Share link = access. Now a collaborator.", icon: "\u{1F91D}" },
    { action: "Adds Fairfield Inn", detail: "Found it's $20 cheaper. Adds note: 'Pool is bigger'", icon: "\u{1F3E8}" },
    { action: "Sarah gets notified", detail: "'Marcus added Fairfield Inn to Dallas Cup trip'", icon: "\u{1F514}" },
  ];
  const PersonFlow = ({ name, emoji, steps, color }) => (
    <Card color={color} title={`${emoji} ${name.toUpperCase()}'S JOURNEY`}>
      <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
        {steps.map((s, i) => (
          <div key={i} style={{ display: "flex", gap: 10, alignItems: "flex-start" }}>
            <div style={{ width: 28, height: 28, borderRadius: 6, background: C.surface, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 14, flexShrink: 0 }}>{s.icon}</div>
            <div style={{ flex: 1 }}><div style={{ fontSize: 13, fontWeight: 600, color: C.text }}>{s.action}</div><div style={{ fontSize: 11, color: C.textMuted, marginTop: 1 }}>{s.detail}</div></div>
          </div>
        ))}
      </div>
    </Card>
  );
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>
      <SubHead text="Parent-to-parent flow \u2014 Sarah creates, Marcus discovers, network grows" />
      <PersonFlow name="Sarah" emoji="\u{1F469}" steps={sarah} color={C.blue} />
      <div style={{ textAlign: "center", color: C.pink, fontSize: 22, lineHeight: "24px" }}>{"\u2193"} <span style={{ fontSize: 11, fontFamily: mono }}>SHARE LINK SENT</span> {"\u2193"}</div>
      <PersonFlow name="Marcus" emoji="\u{1F468}" steps={marcus} color={C.green} />
      <Card color={C.pink} title="THE NETWORK EFFECT">
        <div style={{ display: "flex", gap: 16, marginBottom: 10, flexWrap: "wrap" }}>
          <Stat value="1" label="plan shared" color={C.blue} />
          <Stat value="12-18" label="parents see it" color={C.cyan} />
          <Stat value="6-10" label="sign up" color={C.green} />
          <Stat value="2-3" label="create own plans" color={C.pink} />
        </div>
        <div style={{ fontSize: 12, color: C.textMuted, lineHeight: 1.6 }}>Each tournament has 15-40 teams. Each team has 12-18 families. One team mom creating one plan can reach <strong style={{ color: C.text }}>750-2,000 families</strong> through a single tournament's worth of group texts.</div>
      </Card>
    </div>
  );
}

function ProjectView() {
  const [activeTab, setActiveTab] = useState("story");
  const tabComponents = { stack: StackTab, arch: ArchTab, sharing: SharingTab, phases: PhasesTab, story: StoryTab, market: MarketTab, revenue: RevenueTab, compare: CompareTab, timeline: TimelineTab, financials: FinancialsTab, journey: JourneyTab };
  const ActiveComponent = tabComponents[activeTab];
  return (
    <div>
      <div style={{ display: "flex", gap: 0, borderBottom: `1px solid ${C.border}`, overflowX: "auto", paddingBottom: 0, padding: "0 20px" }}>
        {projectTabGroups.map((group, gi) => (
          <div key={gi} style={{ display: "flex", alignItems: "flex-end" }}>
            <span style={{ fontSize: 9, fontWeight: 700, color: C.textDim, fontFamily: mono, letterSpacing: "0.08em", padding: "0 6px 8px", whiteSpace: "nowrap" }}>{group.label}</span>
            {group.tabs.map((tab) => (
              <button key={tab.id} onClick={() => setActiveTab(tab.id)} style={{ background: activeTab === tab.id ? C.blue + "12" : "transparent", border: "none", borderBottom: activeTab === tab.id ? `2px solid ${C.blue}` : "2px solid transparent", color: activeTab === tab.id ? C.blue : C.textMuted, padding: "6px 10px", fontSize: 11, fontWeight: 600, cursor: "pointer", borderRadius: "5px 5px 0 0", whiteSpace: "nowrap" }}>{tab.label}</button>
            ))}
            {gi < projectTabGroups.length - 1 && <div style={{ width: 1, height: 16, background: C.border, margin: "0 4px", alignSelf: "flex-end", marginBottom: 6 }} />}
          </div>
        ))}
      </div>
      <div style={{ padding: 20 }}><ActiveComponent /></div>
    </div>
  );
}

/* Admin View */
const STATUS_CYCLE = ["todo", "next", "active", "done", "blocked", "waiting"];
const STATUS_MAP = {
  done: { label: "DONE", color: C.green, icon: "\u2713" },
  active: { label: "ACTIVE", color: C.amber, icon: "\u25CF" },
  next: { label: "NEXT", color: C.blue, icon: "\u25CB" },
  blocked: { label: "BLOCKED", color: C.red, icon: "\u2715" },
  waiting: { label: "WAITING", color: C.purple, icon: "\u25CC" },
  todo: { label: "TODO", color: C.textDim, icon: "\u25CB" },
};

const ADMIN_INITIAL = {
  sections: [
    { id: "env-switch", title: "ENVIRONMENT SWITCH", status: "active", color: C.amber, open: true, tasks: [
      { id: "es1", name: "Create/verify aiob@travlteam.com accounts (Clerk, Supabase, EAS)", status: "active", owner: "aidan", note: "Tonight \u2014 first priority", priority: "urgent" },
      { id: "es2", name: "Reconfigure EAS Build for Mike's Apple Dev (MG7Z3C55G5)", status: "next", owner: "aidan", note: "Mike needs to add Aidan to Apple Developer if not done", priority: "urgent" },
      { id: "es3", name: "Push first build to Mike's TestFlight", status: "todo", owner: "aidan", note: "", priority: "urgent" },
      { id: "es4", name: "Verify CI/CD pipeline works (anyone can trigger build)", status: "todo", owner: "aidan", note: "", priority: "high" },
      { id: "es5", name: "Update environment variables for production", status: "todo", owner: "aidan", note: "Clerk keys, Supabase URL, API keys", priority: "high" },
    ]},
    { id: "qa-testing", title: "QA TESTING (Feb 20)", status: "next", color: C.blue, open: true, tasks: [
      { id: "qa1", name: "Test: Auth flow \u2014 sign up, sign in, sign out, token refresh", status: "todo", owner: "aidan", note: "Clerk integration. Test on both iOS and if possible Android.", priority: "urgent" },
      { id: "qa2", name: "Test: Search \u2014 keyword search, location-based, empty states", status: "todo", owner: "aidan", note: "Google Places + Foursquare merge. Check for zero results.", priority: "urgent" },
      { id: "qa3", name: "Test: Map \u2014 pins render, bottom sheet, list/map toggle, current location", status: "todo", owner: "aidan", note: "", priority: "high" },
      { id: "qa4", name: "Test: Plans CRUD \u2014 create, edit, delete, list view, empty state", status: "todo", owner: "aidan", note: "", priority: "high" },
      { id: "qa5", name: "Test: Save venue to plan \u2014 add, remove, notes, the core loop", status: "todo", owner: "aidan", note: "", priority: "high" },
      { id: "qa6", name: "Test: Filter chips \u2014 Food, Lodging, Event Location labels", status: "todo", owner: "aidan", note: "Per Mike/Tony feedback: not Restaurants/Hotels/Destination (HVS-64, 80)", priority: "normal" },
      { id: "qa7", name: "Test: Share link generation + opening", status: "todo", owner: "aidan", note: "", priority: "normal" },
      { id: "qa8", name: "Test: Profile + settings screens", status: "todo", owner: "aidan", note: "Can be stubbed if time is tight", priority: "low" },
    ]},
    { id: "bug-fix", title: "BUG FIXING (Feb 21)", status: "todo", color: C.red, open: false, tasks: [
      { id: "bf1", name: "Fix demo-breakers: crashes, auth failures, white screens", status: "todo", owner: "aidan", note: "Priority 1 \u2014 anything that prevents a walkthrough", priority: "urgent" },
      { id: "bf2", name: "Fix functional bugs: zero results, broken filters, save failures", status: "todo", owner: "aidan", note: "Priority 2 \u2014 features that don't work", priority: "high" },
      { id: "bf3", name: "Fix UI/cosmetic: wrong labels, layout breaks, missing loading states", status: "todo", owner: "aidan", note: "Priority 3 \u2014 looks wrong but works", priority: "normal" },
      { id: "bf4", name: "Apply Mike/Tony label feedback (HVS-64, HVS-80)", status: "todo", owner: "aidan", note: "Food not Restaurants, Lodging not Hotels, Event Location not Destination", priority: "normal" },
    ]},
    { id: "polish", title: "POLISH + DEMO PREP (Feb 22-23)", status: "todo", color: C.cyan, open: false, tasks: [
      { id: "po1", name: "Full walkthrough #1 \u2014 fresh user perspective", status: "todo", owner: "aidan", note: "Sign up \u2192 search \u2192 save \u2192 share. Note anything that feels off.", priority: "high" },
      { id: "po2", name: "Full walkthrough #2 \u2014 Mike's use case", status: "todo", owner: "aidan", note: "Create Dallas Cup plan, search hotels, add to plan, share link", priority: "high" },
      { id: "po3", name: "Full walkthrough #3 \u2014 edge cases", status: "todo", owner: "aidan", note: "No results, bad connection, rapid tapping, back button behavior", priority: "normal" },
      { id: "po4", name: "Loading states + error handling pass", status: "todo", owner: "aidan", note: "Every screen should handle loading, error, empty gracefully", priority: "normal" },
      { id: "po5", name: "Final TestFlight build pushed to Mike", status: "todo", owner: "aidan", note: "The one he opens Monday morning", priority: "urgent" },
    ]},
    { id: "backend", title: "BACKEND (Complete)", status: "done", color: C.green, open: false, tasks: [
      { id: "be1", name: "Supabase Edge Functions setup", status: "done", owner: "aidan", note: "", priority: "normal" },
      { id: "be2", name: "Google Places API integration", status: "done", owner: "aidan", note: "", priority: "normal" },
      { id: "be3", name: "Foursquare API integration", status: "done", owner: "aidan", note: "", priority: "normal" },
      { id: "be4", name: "Unified merge + dedup engine", status: "done", owner: "aidan", note: "100m radius, 70% name match", priority: "normal" },
      { id: "be5", name: "Plan CRUD endpoints", status: "done", owner: "aidan", note: "", priority: "normal" },
      { id: "be6", name: "Venue save-to-plan endpoint", status: "done", owner: "aidan", note: "", priority: "normal" },
    ]},
    { id: "database", title: "DATABASE (Complete)", status: "done", color: C.green, open: false, tasks: [
      { id: "db1", name: "Supabase project provisioned (PostgreSQL)", status: "done", owner: "aidan", note: "", priority: "normal" },
      { id: "db2", name: "plans table + share_code column", status: "done", owner: "", note: "", priority: "normal" },
      { id: "db3", name: "plan_collaborators table", status: "done", owner: "", note: "owner, editor, viewer roles", priority: "normal" },
      { id: "db4", name: "plan_venues table", status: "done", owner: "", note: "venue_id, notes, votes", priority: "normal" },
      { id: "db5", name: "venues table", status: "done", owner: "", note: "google_id, fsq_id, merged flag", priority: "normal" },
    ]},
    { id: "auth", title: "AUTH + SECURITY (Complete)", status: "done", color: C.green, open: false, tasks: [
      { id: "au1", name: "Clerk integration + publishable key", status: "done", owner: "aidan", note: "", priority: "normal" },
      { id: "au2", name: "Clerk \u2194 Supabase JWT template", status: "done", owner: "aidan", note: "", priority: "normal" },
      { id: "au3", name: "Row-Level Security policies on all tables", status: "done", owner: "aidan", note: "", priority: "normal" },
      { id: "au4", name: "No hardcoded credentials in codebase", status: "done", owner: "aidan", note: "Direct fix from old developer's 25+ issues", priority: "normal" },
    ]},
    { id: "deploy", title: "DEPLOYMENT (Complete)", status: "done", color: C.green, open: false, tasks: [
      { id: "de1", name: "EAS Build configured", status: "done", owner: "aidan", note: "", priority: "normal" },
      { id: "de2", name: "App built via vibecodeapp.com", status: "done", owner: "aidan", note: "AI-assisted generation \u2192 full codebase export", priority: "normal" },
      { id: "de3", name: "Codebase in GitHub", status: "done", owner: "aidan", note: "Full source control, no black boxes", priority: "normal" },
      { id: "de4", name: "Deployed to Aidan's TestFlight (working)", status: "done", owner: "aidan", note: "All features coded, needs testing", priority: "normal" },
    ]},
    { id: "postmvp", title: "POST-MVP \u2014 After Feb 23", status: "future", color: C.purple, open: false, tasks: [
      { id: "pm1", name: "Interactive plan sharing (Partiful model)", status: "todo", owner: "", note: "Clickable venues, not a PDF. View without signup, account to edit.", priority: "high" },
      { id: "pm2", name: "Web app for non-app-users", status: "todo", owner: "", note: "travlteam.app/p/abc123 renders without the app installed", priority: "high" },
      { id: "pm3", name: "Deep links (text/email \u2192 app or web fallback)", status: "todo", owner: "", note: "", priority: "normal" },
      { id: "pm4", name: "Directions button (navigate event \u2192 venue)", status: "todo", owner: "", note: "Stretch goal that almost made MVP", priority: "normal" },
      { id: "pm5", name: "Push notifications", status: "todo", owner: "", note: "'Marcus added Fairfield Inn'", priority: "normal" },
      { id: "pm6", name: "Ratings & reviews (dropdown style)", status: "todo", owner: "", note: "Per Mike's vision", priority: "normal" },
      { id: "pm7", name: "Gemini Flash 2.5 AI search (~$0.04/search)", status: "todo", owner: "", note: "Natural language venue search", priority: "normal" },
    ]},
  ],
};

const STORAGE_KEY = "travlteam-admin-v3";

function usePersistedState() {
  const [data, setData] = useState(ADMIN_INITIAL);
  const [loaded, setLoaded] = useState(false);
  useEffect(() => {
    const result = storage.get(STORAGE_KEY);
    if (result && result.value) {
      try {
        const parsed = JSON.parse(result.value);
        if (parsed && parsed.sections) setData(parsed);
      } catch (e) { /* use initial */ }
    }
    setLoaded(true);
  }, []);
  const save = useCallback((newData) => {
    setData(newData);
    storage.set(STORAGE_KEY, JSON.stringify(newData));
  }, []);
  return [data, save, loaded];
}

function TaskRow({ task, onCycleStatus, onUpdateNote, onUpdateName, onDelete }) {
  const [editing, setEditing] = useState(null);
  const [editVal, setEditVal] = useState("");
  const s = STATUS_MAP[task.status] || STATUS_MAP.todo;
  const priColors = { urgent: C.red, high: C.orange, normal: C.blue, low: C.textDim };
  const startEdit = (field) => { setEditing(field); setEditVal(field === "note" ? task.note : task.name); };
  const commitEdit = () => { if (editing === "note") onUpdateNote(editVal); else if (editing === "name") onUpdateName(editVal); setEditing(null); };
  return (
    <div style={{ display: "flex", alignItems: "flex-start", gap: 8, padding: "7px 0", borderBottom: `1px solid ${C.border}40` }}>
      <button onClick={onCycleStatus} title={`Click to cycle (${STATUS_CYCLE.join(" \u2192 ")})`} style={{ color: s.color, fontSize: 13, marginTop: 1, fontFamily: mono, minWidth: 16, textAlign: "center", background: "none", border: "none", cursor: "pointer", padding: 0, lineHeight: 1 }}>{s.icon}</button>
      <div style={{ flex: 1, minWidth: 0 }}>
        {editing === "name" ? (
          <input autoFocus value={editVal} onChange={(e) => setEditVal(e.target.value)} onBlur={commitEdit} onKeyDown={(e) => { if (e.key === "Enter") commitEdit(); if (e.key === "Escape") setEditing(null); }} style={{ fontSize: 13, color: C.text, background: C.surfaceAlt, border: `1px solid ${C.blue}50`, borderRadius: 4, padding: "2px 6px", width: "100%", fontFamily: sans, outline: "none" }} />
        ) : (
          <div style={{ display: "flex", alignItems: "center", gap: 6, flexWrap: "wrap" }}>
            <span onClick={() => startEdit("name")} style={{ fontSize: 13, color: task.status === "done" ? C.textDim : C.text, fontWeight: 500, textDecoration: task.status === "done" ? "line-through" : "none", cursor: "pointer" }} title="Click to edit">{task.name}</span>
            {task.priority && task.priority !== "normal" && <span style={{ width: 6, height: 6, borderRadius: 3, background: priColors[task.priority] || C.textDim, flexShrink: 0 }} title={task.priority} />}
            {task.owner && <span style={{ fontSize: 10, color: C.textDim, fontFamily: mono }}>{task.owner}</span>}
          </div>
        )}
        {editing === "note" ? (
          <input autoFocus value={editVal} onChange={(e) => setEditVal(e.target.value)} onBlur={commitEdit} onKeyDown={(e) => { if (e.key === "Enter") commitEdit(); if (e.key === "Escape") setEditing(null); }} placeholder="Add a note..." style={{ fontSize: 11, color: C.textMid, background: C.surfaceAlt, border: `1px solid ${C.blue}50`, borderRadius: 4, padding: "2px 6px", width: "100%", fontFamily: sans, outline: "none", marginTop: 3 }} />
        ) : (
          <div onClick={() => startEdit("note")} style={{ fontSize: 11, color: task.note ? C.textDim : C.border, marginTop: 2, lineHeight: 1.4, cursor: "pointer", minHeight: 14 }} title="Click to edit note">{task.note || "+ add note"}</div>
        )}
      </div>
      <div style={{ display: "flex", alignItems: "center", gap: 4, flexShrink: 0 }}>
        <Badge label={s.label} color={s.color} />
        <button onClick={onDelete} title="Delete task" style={{ background: "none", border: "none", color: C.textDim, fontSize: 11, cursor: "pointer", padding: "0 2px", opacity: 0.4 }}>{"\u00D7"}</button>
      </div>
    </div>
  );
}

function SectionBlock({ section, onToggle, onTaskUpdate, onAddTask, onDeleteTask }) {
  const [newTaskName, setNewTaskName] = useState("");
  const [adding, setAdding] = useState(false);
  const doneCount = section.tasks.filter(t => t.status === "done").length;
  const total = section.tasks.length;
  const pct = total > 0 ? Math.round((doneCount / total) * 100) : 0;
  const sectionColor = section.tasks.every(t => t.status === "done") ? C.green : section.tasks.some(t => t.status === "active") ? C.amber : section.color;
  const addTask = () => { if (!newTaskName.trim()) return; onAddTask(newTaskName.trim()); setNewTaskName(""); setAdding(false); };
  return (
    <div style={{ background: C.surface, border: `1px solid ${C.border}`, borderRadius: 10, overflow: "hidden", marginBottom: 8 }}>
      <div onClick={onToggle} style={{ display: "flex", alignItems: "center", justifyContent: "space-between", padding: "10px 14px", cursor: "pointer", borderBottom: section.open ? `1px solid ${C.border}` : "none", background: sectionColor + "06" }}>
        <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
          <div style={{ width: 3, height: 16, background: sectionColor, borderRadius: 2 }} />
          <span style={{ fontSize: 12, fontWeight: 700, color: C.white, letterSpacing: "0.02em" }}>{section.title}</span>
          <span style={{ fontSize: 10, color: C.textDim, fontFamily: mono }}>{doneCount}/{total}</span>
        </div>
        <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
          <div style={{ width: 40, height: 4, background: C.border, borderRadius: 2, overflow: "hidden" }}>
            <div style={{ width: `${pct}%`, height: "100%", background: sectionColor, borderRadius: 2, transition: "width 0.3s" }} />
          </div>
          <span style={{ fontSize: 10, color: C.textDim, fontFamily: mono }}>{pct}%</span>
          <span style={{ fontSize: 12, color: C.textDim, transition: "transform 0.15s", transform: section.open ? "rotate(0)" : "rotate(-90deg)" }}>{"\u25BC"}</span>
        </div>
      </div>
      {section.open && (
        <div style={{ padding: "4px 14px 8px" }}>
          {section.tasks.map((task) => (
            <TaskRow key={task.id} task={task}
              onCycleStatus={() => { const idx = STATUS_CYCLE.indexOf(task.status); onTaskUpdate(task.id, { status: STATUS_CYCLE[(idx + 1) % STATUS_CYCLE.length] }); }}
              onUpdateNote={(note) => onTaskUpdate(task.id, { note })}
              onUpdateName={(name) => onTaskUpdate(task.id, { name })}
              onDelete={() => onDeleteTask(task.id)}
            />
          ))}
          {adding ? (
            <div style={{ display: "flex", gap: 6, padding: "8px 0 2px", alignItems: "center" }}>
              <input autoFocus value={newTaskName} onChange={(e) => setNewTaskName(e.target.value)} onKeyDown={(e) => { if (e.key === "Enter") addTask(); if (e.key === "Escape") { setAdding(false); setNewTaskName(""); } }} placeholder="Task name..." style={{ flex: 1, fontSize: 12, color: C.text, background: C.surfaceAlt, border: `1px solid ${C.blue}40`, borderRadius: 5, padding: "5px 8px", fontFamily: sans, outline: "none" }} />
              <button onClick={addTask} style={{ fontSize: 11, color: C.blue, background: C.blue + "15", border: `1px solid ${C.blue}30`, borderRadius: 5, padding: "4px 10px", cursor: "pointer", fontWeight: 600 }}>Add</button>
              <button onClick={() => { setAdding(false); setNewTaskName(""); }} style={{ fontSize: 11, color: C.textDim, background: "none", border: "none", cursor: "pointer", padding: "4px 6px" }}>{"\u2715"}</button>
            </div>
          ) : (
            <button onClick={() => setAdding(true)} style={{ fontSize: 11, color: C.textDim, background: "none", border: "none", cursor: "pointer", padding: "8px 0 2px", fontFamily: sans, display: "flex", alignItems: "center", gap: 4 }}>
              <span style={{ fontSize: 14, lineHeight: 1 }}>+</span> Add task
            </button>
          )}
        </div>
      )}
    </div>
  );
}

function AdminView() {
  const [data, save, loaded] = usePersistedState();
  const toggleSection = (sectionId) => save({ ...data, sections: data.sections.map(s => s.id === sectionId ? { ...s, open: !s.open } : s) });
  const updateTask = (sectionId, taskId, updates) => save({ ...data, sections: data.sections.map(s => s.id === sectionId ? { ...s, tasks: s.tasks.map(t => t.id === taskId ? { ...t, ...updates } : t) } : s) });
  const addTask = (sectionId, name) => save({ ...data, sections: data.sections.map(s => s.id === sectionId ? { ...s, tasks: [...s.tasks, { id: `t${Date.now()}`, name, status: "todo", owner: "", note: "", priority: "normal" }] } : s) });
  const deleteTask = (sectionId, taskId) => save({ ...data, sections: data.sections.map(s => s.id === sectionId ? { ...s, tasks: s.tasks.filter(t => t.id !== taskId) } : s) });
  const resetData = () => { if (confirm("Reset all tasks to defaults? This cannot be undone.")) save(ADMIN_INITIAL); };

  const allTasks = data.sections.flatMap(s => s.tasks);
  const doneTotal = allTasks.filter(t => t.status === "done").length;
  const activeTotal = allTasks.filter(t => t.status === "active").length;
  const blockedTotal = allTasks.filter(t => t.status === "blocked").length;
  const totalTasks = allTasks.length;
  const deadline = new Date("2026-02-23");
  const now = new Date();
  const daysLeft = Math.max(0, Math.ceil((deadline - now) / (1000 * 60 * 60 * 24)));

  if (!loaded) return <div style={{ background: C.bg, minHeight: "60vh", display: "flex", alignItems: "center", justifyContent: "center", color: C.textDim, fontFamily: mono, fontSize: 13 }}>Loading...</div>;

  return (
    <div style={{ maxWidth: 680, margin: "0 auto", padding: "12px 12px 40px" }}>
      <div style={{ display: "flex", gap: 6, flexWrap: "wrap", marginBottom: 12 }}>
        {[
          { value: `${daysLeft}d`, label: "TO DEADLINE", color: daysLeft <= 5 ? C.red : daysLeft <= 10 ? C.amber : C.blue },
          { value: `${doneTotal}/${totalTasks}`, label: "DONE", color: C.green },
          { value: String(activeTotal), label: "ACTIVE", color: C.amber },
          { value: String(blockedTotal), label: "BLOCKED", color: blockedTotal > 0 ? C.red : C.textDim },
          { value: `${Math.round((doneTotal / totalTasks) * 100)}%`, label: "COMPLETE", color: C.blue },
        ].map((s, i) => (
          <div key={i} style={{ flex: "1 1 70px", background: C.surface, border: `1px solid ${C.border}`, borderRadius: 8, padding: "8px 6px", textAlign: "center" }}>
            <div style={{ fontSize: 18, fontWeight: 800, color: s.color, fontFamily: mono }}>{s.value}</div>
            <div style={{ fontSize: 9, color: C.textDim, marginTop: 1, fontFamily: mono, letterSpacing: "0.05em" }}>{s.label}</div>
          </div>
        ))}
      </div>
      <div style={{ background: C.surface, border: `1px solid ${C.border}`, borderRadius: 8, padding: "8px 12px", marginBottom: 12 }}>
        <div style={{ display: "flex", justifyContent: "space-between", marginBottom: 4 }}>
          <span style={{ fontSize: 10, color: C.textDim, fontFamily: mono }}>OVERALL PROGRESS</span>
          <span style={{ fontSize: 10, color: C.green, fontFamily: mono }}>{doneTotal} of {totalTasks} tasks</span>
        </div>
        <div style={{ width: "100%", height: 6, background: C.border, borderRadius: 3, overflow: "hidden" }}>
          <div style={{ width: `${(doneTotal / totalTasks) * 100}%`, height: "100%", background: `linear-gradient(90deg, ${C.green}, ${C.cyan})`, borderRadius: 3, transition: "width 0.3s" }} />
        </div>
      </div>
      {data.sections.map((section) => (
        <SectionBlock key={section.id} section={section} onToggle={() => toggleSection(section.id)} onTaskUpdate={(taskId, updates) => updateTask(section.id, taskId, updates)} onAddTask={(name) => addTask(section.id, name)} onDeleteTask={(taskId) => deleteTask(section.id, taskId)} />
      ))}
      <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "8px 4px", flexWrap: "wrap", gap: 8 }}>
        <div style={{ display: "flex", gap: 10, fontSize: 10, color: C.textDim }}>
          <span style={{ fontFamily: mono }}>Click status icon to cycle</span><span>{"\u00B7"}</span>
          <span style={{ fontFamily: mono }}>Click task/note to edit</span><span>{"\u00B7"}</span>
          <span style={{ fontFamily: mono }}>Data persists across sessions</span>
        </div>
        <button onClick={resetData} title="Reset to defaults" style={{ fontSize: 10, color: C.textDim, background: "none", border: `1px solid ${C.border}`, borderRadius: 4, padding: "3px 8px", cursor: "pointer", fontFamily: mono }}>{"\u21BA"} Reset</button>
      </div>
    </div>
  );
}

function TravlTeamHub() {
  const [view, setView] = useState("project");
  return (
    <div style={{ background: C.bg, minHeight: "100vh", color: C.text, fontFamily: sans }}>
      <div style={{ background: C.surface, borderBottom: `1px solid ${C.border}`, padding: "10px 16px", display: "flex", justifyContent: "space-between", alignItems: "center", position: "sticky", top: 0, zIndex: 10 }}>
        <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
          <span style={{ fontSize: 20 }}>{"\u{1F3DF}\uFE0F"}</span>
          <span style={{ fontSize: 15, fontWeight: 800, color: C.white }}>TravlTeam</span>
          <span style={{ fontSize: 11, color: C.blue, background: C.blue + "15", padding: "2px 10px", borderRadius: 20, fontWeight: 600 }}>Hub v2</span>
        </div>
        <div style={{ display: "flex", background: C.bg, borderRadius: 8, border: `1px solid ${C.border}`, overflow: "hidden" }}>
          {[
            { id: "project", label: "\u{1F4CA} Project", color: C.blue },
            { id: "admin", label: "\u2699\uFE0F Admin", color: C.purple },
          ].map((v) => (
            <button key={v.id} onClick={() => setView(v.id)} style={{ background: view === v.id ? v.color + "20" : "transparent", border: "none", borderBottom: view === v.id ? `2px solid ${v.color}` : "2px solid transparent", color: view === v.id ? v.color : C.textMuted, padding: "6px 14px", fontSize: 12, fontWeight: 700, cursor: "pointer", fontFamily: sans, whiteSpace: "nowrap" }}>{v.label}</button>
          ))}
        </div>
      </div>
      <div style={{ padding: "6px 20px 0", fontSize: 12, color: C.textMuted }}>
        {view === "project" ? "11 views across tech, business, and execution \u2014 updated Feb 19, 2026" : "Editable task tracker \u2014 QA sprint to Feb 23 deadline"}
      </div>
      {view === "project" ? <ProjectView /> : <AdminView />}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<TravlTeamHub />);
  </script>
</body>
</html>